<head>
  <style>

    h1 {
      text-align: center;
    }

    .card {
      border-radius: 2em;
      text-align: center;
      box-shadow: 0 5px 10px rgba(0,0,0,.2);
    }

    .card:hover{
      box-shadow: 0 5px 10px rgba(0,0,0,.5);
    }

    .button-container {
      margin-left: auto;
      margin-right: auto;
      justify-content: center;
      width: 8em;
    }

  </style>
</head>


<p id="notice"><%= notice %></p>
<h1>News Feed</h1>
<table>
  <thead>
    <tr>
      <th colspan="3"></th>
    </tr>
  </thead>

  <% # Displaying button to create a news post %>
  <center>
    <div class="button-container">
        <%= link_to '<button type="button">New Post</button>'.html_safe, new_news_post_path %>
    </div>
  </center>

  <br>
  <tbody>
    <% # Loop that displays all news posts in separate cards %>
    <% @news_post.each do |news_post| %>
      <tr>
        <div class="mx-auto" style="width: 65%; margin-left: auto; margin-right: auto;">
          <div class="card" style="width: 65%; border: 3px solid black; margin-left: auto; margin-right: auto;">
            <div class="card-body" style="padding: 2%"><center>

              <% # Displaying title %>
              <h3 class="card-title"><%= news_post.title %></h3>

              <% # Displaying name %>
              <h5 class="card-author"> Posted by: <%= news_post.name %></h5>

              <% # Displaying when post was created %>
              <h5 class="card-post-date">Posted on: <%= news_post.created_at.strftime("%m-%d-%Y") %></h5>

              <% # Displaying description %>
              <hr><p class="card-text"><em><%= news_post.description %></em></p><hr>

              <% # Displaying comments if any %>
              Post has <%= news_post.comments.size %> comment(s) <br>

              <% # Displaying show button is visible to any user %>
              <%= link_to 'Show', news_post, :class => "btn btn-primary" %>

              <% # Displaying edit and delete buttons only visible to %>
              <% # user that created it or ADMIN %>
              <% if current_user.uid == news_post.userID || current_user.uid == "110391296899575374577" %>
                <%= link_to 'Edit', edit_news_post_path(news_post), :class => "btn btn-primary" %>
                <%= link_to 'Delete', delete_news_post_path(news_post), :class => "btn btn-primary" %>
              <% end %>
              <%= link_to 'Comment', "/comments/new?news_post=#{news_post.id}", :class => "btn btn-primary" %>
            </center></div>
          </div>
        </div>
      </tr>
      <br>
    <% end %>
  </tbody>
</table>

<br>
